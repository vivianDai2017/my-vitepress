## 命令

在Linux服务器上，你可以使用一系列命令来检查服务器的配置，包括内存、磁盘空间、CPU信息等。下面是一些常用的命令：

### 查看内存信息
- `free -m`：显示内存使用情况，单位为MB。
- `free -h`：显示内存使用情况，单位更人性化（自动转换为KB、MB、GB等）。

### 查看磁盘空间
- `df -h`：显示所有挂载点的磁盘空间使用情况，单位更人性化。
- `df -Th`：显示所有挂载点的磁盘空间使用情况，并列出文件系统类型。

### 查看CPU信息
- `lscpu`：显示处理器架构信息。
- `cat /proc/cpuinfo`：显示详细的CPU信息，包括CPU型号、主频、核心数量等。

### 查看系统版本和内核信息
- `uname -a`：显示系统内核信息等。

### 查看网络配置信息
- `ip addr show`：现代Linux系统中用于查看网络接口配置的命令。
- `ifconfig`：在一些较老的Linux系统中用于查看网络接口配置。

### 其他系统信息
- `top` 或 `htop`：实时查看CPU使用率、内存使用率、磁盘使用率、进程状态等。
- `uptime`：显示系统运行时间、登录用户数、平均负载等。
- `cat /proc/version`：显示内核版本详情。
- `lsb_release -a` 或 `cat /etc/os-release`：显示Linux发行版信息。

如果你需要监控服务器的实时资源使用情况，`htop` 和 `glances` 是很好的选择，它们提供了丰富的信息和交互式界面。

请根据你的具体需求选择相应的命令执行。如果需要进一步的帮助，比如解释命令输出或解决特定问题，请告诉我。

### 服务器上查找一个特定文件
`使用 find 命令`：这会在整个文件系统中搜索指定的文件名。如果您知道大概的搜索范围，可以指定起始目录以减少搜索时间和资源消耗
```sh
find / -name "blueocean.tar" 2>/dev/null
```
### 上传本地文件到服务器(支持SSH的)

```sh
scp /本地文件路径 用户名@服务器地址:~/当前目录/文件名
// scp -r /Users/vivian/Desktop/yongtai-front-end/dist1/  root@121.89.207.223:/root/server_dir
```

- `scp`: scp命令（Secure Copy Protocol）
- `-r`: 需要复制整个目录及其结构，应该使用-r或-R选项来指示scp递归复制目录内容
- `/Users/vivian/Desktop/yongtai-front-end/dist1/`: 要上传的文件的本地路径，可以通过将文件拖进命令行 会自动出现文件路径
- `root@121.89.207.223:`: 用户名@服务器地址:
- `/root/server_dir`: 要添加的服务器目录
- ***如果已经连接到服务器， 这样上传要新打开一个命令行窗口，因为scp命令是用来在两个不同主机之间复制文件的，而不是在已有的SSH会话内部操作***
- ***最好压缩后再上传，直接一个文件夹上传会很慢***
- ***其他上传方式？ && Docker***

### 压缩与解压缩

```sh
tar -czvf blueocean.tar.gz /root/server_dir/blueocean
```

- `tar`: 压缩和解压缩文件的命令
- `-czvf`: tar命令的选项，其中：
  - `c`: 创建新的压缩文件
  - `z`: 使用gzip压缩算法
  - `v`: 显示详细信息（可以不要）
  - `f`: 指定压缩文件的名称
- `blueocean.tar.gz`: 压缩文件的名称
- `/root/server_dir/blueocean`: 要压缩的目录或文件的路径

```sh
  tar -czf jpg.tar.gz *.jpg # 将当前目录下所有.jpg文件打包成jpg.tar.gz
```

```sh
 tar -xzf blueocean.tar.gz  # 解压文件
```

### 解压文件

```sh
tar -xzvf blueocean.tar.gz
```

### 确认是否安装了`zip`包
```sh
zip --version
# or
unzip --version
```

## 华为云部署(CentOS 7.0)

在 CentOS 中安装 Docker 可以按照以下步骤进行：

### 1. 更新系统软件包

首先，更新现有的软件包：

```bash
sudo yum update -y
```

### 2. 安装所需的软件包

安装 `yum-utils` 包，它提供了 `yum-config-manager` 实用工具：

```bash
sudo yum install -y yum-utils
```

### 3. 配置 Docker 仓库

使用 `yum-config-manager` 设置稳定的 Docker 仓库：

```bash
# sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo
# 华为云上这个地址下载不了，网络不可达， 使用之前成功过的阿里云镜像
sudo yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo
```

### 4. 安装 Docker 引擎

安装最新版本的 Docker 引擎和容器：

```bash
sudo yum install -y docker-ce docker-ce-cli containerd.io
# 安装成功后可以查看docker 版本
docker --version
```

### 5. 启动 Docker 服务

启动 Docker 服务：

```bash
sudo systemctl start docker
```

### 6. 验证安装

运行 `hello-world` 镜像来验证 Docker 引擎是否正常运行：

```bash
sudo docker run hello-world
# 未成功，Docker在尝试从Docker Hub拉取hello-world镜像时遇到了网络问题，应该还是国内的网络原因

```
    
`
```
`这个命令是在基于RHEL（Red Hat Enterprise Linux）或其衍生版本如 CentOS、Fedora 等的Linux系统中，使用yum包管理器来安装Docker CE（Community Edition）及其相关组件的。下面我将详细解释这条命令：

sudo: 这是一个在Linux系统中获取超级用户权限的命令。因为安装软件通常需要管理员权限，所以这里使用sudo。
yum: 是Yellowdog Updater Modified的缩写，是RHEL及其衍生版本的默认包管理工具。它用于处理软件包的安装、更新和删除等操作。
install: 这是yum命令的一个子命令，用于安装指定的软件包。
-y: 这个选项告诉yum自动回答“yes”（是）对所有问题，这样可以避免在安装过程中出现交互式提示，使安装过程更加自动化。
docker-ce: 这是Docker的社区版（Community Edition），它是容器技术的实现之一，允许开发者打包他们的应用以及依赖包到一个可移植的容器中，然后发布到任何流行的Linux机器上，也可以实现虚拟化。
docker-ce-cli: 这是Docker的命令行接口（Command Line Interface），它提供了与Docker守护进程进行交互的各种命令，例如docker run、docker build、docker ps等。
containerd.io: 这是一个开源的容器运行时，它是Docker的一部分，负责容器的生命周期管理，包括创建、启动、停止和销毁容器。containerd也是Kubernetes等其他容器编排系统的基础组件。
因此，整个命令的意思是：以管理员权限使用yum工具，自动回答所有问题，安装Docker CE、Docker CLI和Containerd.io这三个组件。这通常是在Linux服务器上准备运行Docker容器的第一步。`

### 5. 启动 Docker

启动 Docker 服务并设置它开机自启动：

```bash
sudo systemctl start docker
sudo systemctl enable docker
```

### 7. 安装Docker Compose

```bash
sudo curl -L "https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
# 第一次可能会不成功 ,啥都没下载下来， 再来一次直至有东西下载下来
`[root@Server-c4c19d39-8d3c-4d11-9a06-21e498dbd6ad ~]# sudo curl -L "https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:--  0:00:05 --:--:--     0
curl: (52) Empty reply from server`
```
1. **设置权限**:
    给`docker-compose`文件赋予执行权限：
    ```bash
    sudo chmod +x /usr/local/bin/docker-compose
    ```
2. **在/usr/bin目录下创建一个指向/usr/local/bin/docker-compose的符号链接**
    ```bash
    sudo ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose

    `这个命令的作用是在/usr/bin目录下创建一个指向/usr/local/bin/docker-compose的符号链接。让我们逐部分理解这个命令：

    sudo: 这是一个在Linux系统中获取超级用户权限的命令。创建文件或目录通常不需要超级用户权限，但是在这个场景下，因为目标目录/usr/bin通常只允许root用户写入，所以需要使用sudo。
    ln: 这是Linux命令行中的link命令的简写，用于创建硬链接或符号链接（软链接）。
    -s: 这个选项告诉ln命令创建一个符号链接（symbolic link），而不是默认的硬链接（hard link）。符号链接类似于Windows系统中的快捷方式，它并不包含实际的数据，而是指向另一个文件或目录的位置。
    /usr/local/bin/docker-compose: 这是原始文件的路径，也就是你要链接的目标。/usr/local/bin通常用于存放本地管理员自行安装的程序，而docker-compose是一个用于定义和运行多容器Docker应用的工具。
    /usr/bin/docker-compose: 这是你希望创建链接的位置和链接名。/usr/bin是Linux系统中存放标准二进制可执行文件的目录，通常是系统和大多数软件包的可执行文件所在位置。
    通过这个命令，你实际上是在/usr/bin目录下创建了一个名为docker-compose的文件，这个文件实际上是一个指向/usr/local/bin/docker-compose的符号链接。这样做的目的是为了让用户可以在任何地方通过简单的docker-compose命令调用该工具，而无需在命令前加上完整的路径。这是在系统级添加可执行程序到全局PATH环境变量的一种常见做法`
    ```

3. **验证Docker Compose安装**:
    确认Docker Compose安装成功：
    ```bash
    docker-compose --version
    ```



### 7. （可选）将当前用户添加到 `docker` 组

如果希望无需 `sudo` 即可运行 Docker 命令，可以将当前用户添加到 `docker` 组：

```bash
sudo usermod -aG docker $USER
```

添加后，注销并重新登录，以使组更改生效。

### 常见问题解决

- **错误：Docker Daemon 无法启动**
  - 检查 Docker 服务状态：
    ```bash
    sudo systemctl status docker
    ```
  - 查看日志以获取更多信息：
    ```bash
    sudo journalctl -u docker
    ```

按照上述步骤，应该可以顺利在 CentOS 中安装并运行 Docker。

## 华为云部署

- **准备**

`服务器: root@124.70.143.16
    镜像: CentOS 8.0
`

- **安装准备**
    要在CentOS 8.0中安装Docker，你可以遵循以下步骤进行操作：

    1. **更新系统**：
    首先，确保你的系统是最新的。打开终端并运行以下命令：
    ```bash
    sudo dnf check-update
    sudo dnf upgrade
    ```

    2. **安装必要的依赖**：
    为了能够正确安装Docker，你需要安装一些依赖项。可以使用以下命令安装：
    ```bash
    <!-- sudo yum install -y yum-utils device-mapper-persistent-data lvm2 -->
    sudo yum install -y yum-utils
    // 安装的是提示找不到地址： 因为社区已经不维护了， 要使用阿里云镜像， 修改/etc/yum.repos.d 下的文件，切换到阿里云镜像， 然后
    sudo yum clean all
    sudo yum makecache
    // 上述两个指令执行成功后再执行
     sudo yum install -y yum-utils
    ```

    3. **添加Docker的YUM仓库**：
    Docker提供了官方的YUM仓库，可以通过添加这个仓库来简化安装过程。考虑到网络因素，推荐使用阿里云的镜像源，这样可以加速下载过程。执行以下命令添加仓库：
    ```bash
    <!-- sudo yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo -->
    sudo dnf config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo
    ```

    4. **安装Docker CE**：
    更新YUM的软件包缓存，并安装Docker CE：
    ```bash
    <!-- sudo yum makecache fast --> 实际未执行
    sudo yum install docker-ce docker-ce-cli containerd.io
    ```

    如果`yum makecache fast`命令报错，尝试去掉`fast`参数再次执行。

    5. **启动并启用Docker服务**：
    安装完成后，启动Docker服务，并设置为开机启动：
    ```bash
    sudo systemctl start docker
    sudo systemctl enable docker
    ```

    6. **验证安装**：
    通过运行一个简单的Docker命令来验证是否安装成功：
    ```bash
    edocker --version
    sudo docker run hello-world
    ```
    如果一切顺利，你将看到来自Docker的欢迎信息。

    请注意，尽管上述步骤基于较新信息和普遍做法，但在实际操作时，建议查阅Docker官方文档以获取最新安装指南，因为软件包名称和步骤可能会随着时间而变化。此外，考虑到你的提问时间是2024年，尽管提供的信息是最近的，但最好还是检查是否有更新的版本或安装方法。

    ### 安装Docker Compose

    由于Docker Compose现在作为一个独立的二进制文件分发，可以直接下载并安装：

    1. **下载Docker Compose**:
    首先，查看Docker Compose的最新版本号，然后下载对应版本的二进制文件。这里以通用的命令为例，获取最新版本的Docker Compose（请在实际操作前访问[Docker Compose的GitHub发布页面](Releases · docker/compose)查询最新版本号）：
    ```bash
    sudo curl -L "https://github.com/docker/compose/releases/download/1.29.2/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
    ```

    2. **设置权限**:
    给`docker-compose`文件赋予执行权限：
    ```bash
    sudo chmod +x /usr/local/bin/docker-compose
    ```

    3. **验证Docker Compose安装**:
    确认Docker Compose安装成功：
    ```bash
    docker-compose --version
    ```

    至此，您应该已经在CentOS 8上成功安装了Docker和Docker Compose，可以开始使用它们部署和管理容器化应用了。

    

## MarvinJS  服务安装

- **CentOS8.2**

    `安装包`：从chemaxon网站[下载](https://download.chemaxon.com/marvin-js)，下载的是一个rpm包

    
    要在Linux服务器上安装一个RPM文件，你可以按照以下步骤操作：

    ### 安装RPM包

    1. **确保rpm包已上传至服务器**：首先，你需要将RPM文件上传到服务器的某个目录下，比如 `/home` 或 `/usr/local/src`。如果你还没有上传，可以使用FTP、SCP或者其他文件传输工具完成这一步。

    2. **切换到存放rpm文件的目录**：使用命令行工具，通过 `cd` 命令进入存放rpm文件的目录。例如，如果rpm文件在 `/home` 目录下，执行 `cd /home`。

    3. **安装RPM包**：使用 `rpm` 命令安装该软件包。通常使用 `-ivh` 参数，其中 `i` 表示安装 (`install`)，`v` 表示详细模式 (`verbose`)，`h` 表示显示进度 (`hash mark`)。命令格式如下：
    ```
    sudo rpm -ivh your_package_name.rpm
    ```
    将 `your_package_name.rpm` 替换为你的实际rpm文件名。

    ### 配置通过IP和端口访问接口

    安装完成后，如果这个rpm包包含了一个可以通过网络访问的服务或接口，你可能需要进行以下配置以便通过IP和端口访问：

    1. **配置文件修改**：找到该服务的配置文件，位于 `/opt/chemaxon/mjs-webservice/config/application.properties` 目录下, 修改端口为8082（根据自己服务的配置）， 原先默认的是8080， 修改后的配置文件如下：
    ```
    # See more on: https://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html
    server.port=8082
    logging.file.name=./logs/mjsws.log
    spring.application.name=marvin-js-mini

    logging.level.com.chemaxon.webservices.marvinjs.component.OnStartLicenseChecker=info

    server.error.include-message=ALWAYS
    server.error.include-binding-errors=ALWAYS

    marvinjs.license.controller.enabled=false
    ```
    

    2. **服务启动与状态检查**：首先，确定服务是否已经自动启动，如果没有，手动启动服务。可以使用 `systemctl` 命令（对于使用systemd的系统，如CentOS 7及以上版本、Fedora等）来管理服务，例如：
    ```
    sudo systemctl start your_service_name.service
    sudo systemctl status your_service_name.service
    ```
    `先修改配置文件`： 位于 `/etc/systemd/system/`目录下

   。

    3. **防火墙配置**：确保服务器的防火墙允许外部访问你设定的端口。使用 `firewall-cmd`（对于使用firewalld的系统）添加端口规则，例如：
    ```
    sudo firewall-cmd --permanent --add-port=8080/tcp
    sudo firewall-cmd --reload
    ```

    4. **重启服务**：修改配置后，记得重启服务使更改生效：
    ```
    sudo systemctl restart your_service_name.service
    ```

    5. **测试访问**：最后，在另一台设备上尝试通过 `ip:port` 访问该服务的接口，确认配置成功。



