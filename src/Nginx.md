# Nginx 相关

## 访问服务器

### mac 端
```
<!-- 以访问jenkins 服务为例 -->
ssh root@121.89.207.223
<!-- 输入指令后根据提示输入密码 -->
Woshikeji2022..
```

在Mac终端上，一旦你通过SSH成功登录到远程服务器（如阿里巴巴云ECS实例），你将使用Linux命令来查看目录和操作文件。要查看当前所在的目录，你可以使用`pwd`（print working directory）命令。若要列出当前目录下的文件和文件夹，可以使用`ls`命令。如果你想查看更详细的文件信息，包括权限、大小等，可以使用`ls -l`命令。

以下是一些基本的目录查看与操作命令：
确保在执行这些命令时，你的SSH会话是活跃的，并且你有足够的权限访问相关的目录和文件。

- **查看当前目录**:
  ```bash
  pwd
  ```

- **列出当前目录内容**:
  ```bash
  ls
  ls -a  // 隐藏目录也列出
  ```

- **列出并详细显示当前目录内容**:
  ```bash
  ls -l
  ```
  
- **切换目录**:
  ```bash
  cd [目录名]
  ```
  例如，要进入名为“Documents”的目录，命令为：`cd Documents`
  
- **查看其他目录内容（不切换目录）**:
  ```bash
  ls [目录路径]
  或
  ls -l [目录路径]
  ```
  例如，查看家目录下的“Downloads”目录内容：`ls -l ~/Downloads`

- **要在Linux中显示`root`目录下所有的隐藏目录（以`.`开头的目录），可以使用以下命令之一：**

    1. 使用`ls`命令结合`-a`选项，显示包括`.`和`..`在内的所有隐藏文件和目录：
    ```bash
    sudo ls -a /root
    ```
    注意：由于`/root`是root用户的主目录，非root用户需要使用`sudo`来获取足够的权限来查看这个目录的内容。

    2. 如果你不想看到`.`和`..`这两个特殊的隐藏目录，可以使用`-A`选项代替：
    ```bash
    sudo ls -A /root
    ```

    这两个命令都需要你具有查看`/root`目录的权限。如果你已经是root用户，那么无需使用`sudo`。如果上述命令执行时提示权限不足，确保你有相应的权限或者以root身份登录。

- **显示当前目录下所有文件(不要含子文件)的大小**
    ```sh
    du -sh .[^.]* *
    ```
    这里的命令解释如下：
    - `du -sh` 用于以人类可读的格式显示目录或文件的大小。
    - `.` 表示当前目录
    - `[^.]*` 是一个正则表达式，匹配所有不以.开头的文件名（即非隐藏文件）。
    - `*` 匹配当前目录下所有的非隐藏文件。


**要查看当前目录所在文件系统的剩余空间，你需要使用`df`命令。但是，直接使用`df`命令会显示整个文件系统的使用情况，而不是特定于当前目录。为了更接近查看“当前目录下的剩余空间”，你可以结合使用`df`和`pwd`命令，或者理解为查看当前目录所在分区的可用空间。下面是具体的操作方法：**

- **查看当前目录所在文件系统的总体空间情况**：
   ```bash
   df -h $(pwd)
   ```
   这里，`$(pwd)`获取当前工作目录的绝对路径，然后将其作为参数传递给`df`命令，`-h`选项让输出的单位更易读（如KB、MB、GB）。

    这将显示包括总容量、已用空间、可用空间以及使用百分比等信息，对于理解当前目录所在分区或挂载点的存储情况非常有用。

    如果你想了解某个特定目录实际占用空间和剩余空间的详细情况（比如，如果你想管理当前目录内部的空间使用），你应该使用`du`命令来检查目录和文件的大小，但这并不直接显示“剩余空间”，而是帮助你管理已用空间。

- **`rm -rf node_modules` 和 `rm node_modules`**

    `rm -rf node_modules` 和 `rm node_modules` 都是用于删除名为 `node_modules` 的目录，但它们之间有一个关键的区别：

    1. **rm -rf node_modules**: 
    - `-r` 或 `-R` 选项表示递归（recursive），意味着该命令会删除 `node_modules` 目录及其包含的所有子目录和文件，不论这些子目录有多深。
    - `-f` 选项代表强制（force），它会强制删除文件或目录，即使该目录非空或文件被设置为只读，也不会提示用户确认，直接进行删除操作。
    因此，`rm -rf node_modules` 命令会迅速且没有任何提示地删除 `node_modules` 目录及其所有内容，且此操作不可逆。

    2. **rm node_modules**:
    - 如果 `node_modules` 是一个空目录，这个命令会直接删除该目录。
    - 但如果 `node_modules` 目录包含任何文件或子目录，这条命令在大多数Unix-like系统（包括macOS）上会失败，并显示一个错误消息，告诉你该目录不是空的，不能这样直接删除，除非你使用 `-r` 或 `-R` 选项来进行递归删除。
    
    总结来说，`rm -rf node_modules` 是一个更为强力的命令，它会不顾一切地删除目标目录及其所有内容，而 `rm node_modules` 则主要用于删除空目录，或在没有 `-r` 选项的情况下尝试删除非空目录时会导致失败。使用这些命令时应特别小心，以免误删重要数据。

- **上传本地文件到服务器(支持SSH的)**
    ```sh
    scp /本地文件路径 用户名@服务器地址:~/当前目录/文件名
    // scp -r /Users/vivian/Desktop/yongtai-front-end/dist1/  root@121.89.207.223:/root/server_dir
    ```
    - `scp`: scp命令（Secure Copy Protocol）
    - `-r`: 需要复制整个目录及其结构，应该使用-r或-R选项来指示scp递归复制目录内容
    - `/Users/vivian/Desktop/yongtai-front-end/dist1/`: 要上传的文件的本地路径，可以通过将文件拖进命令行 会自动出现文件路径
    - `root@121.89.207.223:`: 用户名@服务器地址:
    - `/root/server_dir`: 要添加的服务器目录
    - ***如果已经连接到服务器， 这样上传要新打开一个命令行窗口，因为scp命令是用来在两个不同主机之间复制文件的，而不是在已有的SSH会话内部操作***
    - ***最好压缩后再上传，直接一个文件夹上传会很慢***
    - ***其他上传方式？ && Docker***

- **其他待整理的**
    这两个命令都是Linux shell命令，用于文件和目录的操作。具体来说：

1. `rm -rf /var/www/dist`

这个命令意在删除`/var/www/dist`目录及其包含的所有文件和子目录，而且是强制删除，不经过确认。这里是解释每个部分的含义：
   - `rm` 是 "remove" 的缩写，用于删除文件或目录。
   - `-r` 或 `-R` 表示递归删除，即会删除指定目录及其所有内容，包括子目录和文件。
   - `-f` 表示 "force"，强制删除，不会提示用户确认，即使文件或目录设置为只读也会尝试删除。

**警告**: `rm -rf`命令极其危险，特别是在根目录(`/`)或重要系统目录下使用时，因为它会无提示地永久删除数据。在生产环境中应格外小心使用此命令，以避免不可逆的数据损失。

2. `cp -r /root/server_dir/yongtai-front-end/dist /var/www/dist`

这个命令用于将`/root/server_dir/yongtai-front-end/dist`目录及其内容复制到`/var/www/dist`目录下。这里是各部分的解释：
   - `cp` 是 "copy" 的缩写，用于拷贝文件或目录。
   - `-r` 或 `-R` 同样表示递归复制，允许复制目录及其中的所有内容。
   - `/root/server_dir/yongtai-front-end/dist` 是源目录，即要复制的内容所在位置。
   - `/var/www/dist` 是目标目录，即内容要被复制到的位置。

总结起来，这两个命令执行了一个删除旧`dist`目录的操作，随后又将一个位于`/root/server_dir/yongtai-front-end/`下的新`dist`目录复制到了`/var/www/`下，实现了目录的替换更新。在执行这类操作时，务必确认操作的正确性，以避免数据丢失。
